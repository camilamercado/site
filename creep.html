<!DOCTYPE html>
<html>
    <head>
    	<script src="http://d3js.org/d3.v3.min.js"  charset="utf-8"></script>
    </head>

   <link href="css/creep.css" rel="stylesheet" />

    <body>

    <div class="type">T<BR>U<BR><BR>D<BR>e<BR>l<BR>f<BR>t<BR><BR>B<BR>o<BR>t<BR>a<BR>n<BR>i<BR>c<BR>a<BR>l<BR>G<BR>a<BR>r<BR>d<BR>e<BR>n<BR>N<BR>e<BR>t<BR>h<BR>e<BR>r<BR>l<BR>a<BR>n<BR>d<BR>s</BR></div>    

    <div class="type2">W<BR>e<BR>s<BR>t<BR>m<BR>a<BR>n<BR><BR>I<BR>s<BR>l<BR>a<BR>n<BR>d<BR>s<BR><BR>V<BR>e<BR>s<BR>t<BR>m<BR>a<BR>n<BR>n<BR>a<BR>e<BR>y<BR>j<BR>a<BR>r<BR><BR>I<BR>c<BR>e<BR>l<BR>a<BR>n<BR>d</div>
    
    <div class="type3">H<BR>Ã´<BR>t<BR>e<BR>l<BR><BR>L<BR>e<BR>s<BR><BR>E<BR>l<BR>m<BR>e<BR>s<BR><BR>F<BR>r<BR>a<BR>n<BR>c<BR>e</div>
    
    <div class="container"></div>
     

    <script type="text/javascript">

     var state = "leaf";
     console.log(state);

      var dataset = [];                               //Initialize empty array
      for (var i = 0; i < 30; i++) {                  //Loop 25 times
        var newNumber = Math.random() * 45;           //New random number (0-30)
        dataset = dataset.concat(newNumber);          //Add new number to array
      }
      
      d3.select(".container").selectAll("div")
        .data(dataset)
        .enter()
        .append("div")
        .attr("class", "bar")
        .style("width", function(d) {                 //d = data attr. of elm being processed
          var barHeight = d * 18;
          return barHeight + "px";
          console.log(barHeight);
        })
        .style("background", function(d) {
          if (d > 30) {  
              return "url(http://217.128.135.218/mjpg/video.mjpg)";
          } else if (d > 20) {   
              return "url(http://82.148.72.2:60000/cgi-bin/faststream.jpg?stream=full&fps=0)";
          } else {
              return "url(http://tuincam.bt.tudelft.nl/mjpg/video.mjpg)";
          }
         });

            
         d3.select("body")                                        //On mouseover, update with new data  
            .on("mouseover", function() {                         //New values for dataset
            var numValues = dataset.length;                       //Count original length of dataset
            dataset = [];                                         //Initialize empty array
                
            for (var i = 0; i < numValues; i++) {                 //Loop numValues times
              var newNumber = Math.floor(Math.random() * 55);     //New random integer (0-25)
              dataset.push(newNumber);                            //Add new number to array
            }   
    
            d3.selectAll(".bar")                                   //Update all rects
              .data(dataset)    
              .transition()
              .delay(function(d, i) {
                return i / dataset.length * 1000;
              })
              .duration(500)
              
              .style("height", function(d) {
                 var barHeight = d * 18;
                 return barHeight + "px";
              })

            
        });

        d3.select("body")                                        //On mouseover, update with new data  
            .on("mouseout", function() {                         //New values for dataset
            var numValues = dataset.length;                       //Count original length of dataset
            dataset = [];                                         //Initialize empty array
                
            for (var i = 0; i < numValues; i++) {                 //Loop numValues times
              var newNumber = Math.floor(Math.random() * 55);     //New random integer (0-25)
              dataset.push(newNumber);                            //Add new number to array
            }   
    
            d3.selectAll(".bar")                                   //Update all rects
              .data(dataset)    
              .transition()
              .delay(function(d, i) {
                return i / dataset.length * 1000;
              })
              .duration(500)
              
              .style("height", function(d) {
                 //var barHeight = d * 18;
                 return 75 + "px";
              })

            
        });

      if (state === "leaf") {

        d3.select("body")                                       //On mouseover, update with new data  
            .on("click", function() {  
            state = "obs";
            console.log(state);
            d3.selectAll("div")                                 //Update all rects
            .style("background-image", function(d) {
                  return "url(http://iris.not.iac.es/axis-cgi/mjpg/video.cgi)"
            })
           

        });

        } if (state === "obs"){
          
          d3.select("body")                                     //On mouseover, update with new data  
            .on("click", function() { 
            state = "leaf"; 
            console.log(state);
            d3.selectAll("div")                                 //Update all rects
            .style("background-image", function(d) {
                  return "url(http://200.79.225.92:8080/mjpg/video.mjpg)"
            })
          
          });

        };
      

        </script>

      </body>
      </html>